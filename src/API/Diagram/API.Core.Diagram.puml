@startuml
scale 1
' skinparam classAttributeIconSize 0

namespace API.Mail #DDDDDD {
    IMailAddress o-- IMail
    IMessage o-- IMail

    IContent <|-- IMessage
    IHeader <|-- IMessage
    IAddressee <|-- IMailAddress
    IAddress <|-- IMailAddress

    interface IAddress
    {
        + String Address 
    }
    interface IAddressee
    {
        + String Addressee
    } 

    interface IMailAddress
    {
    }

    interface IHeader
    {
        + String Header 
    }
    interface IContent
    {
        + JSON Content
    }
    interface IMessage
    {
    }
    interface IMail
    {
        + IMailAddress reciever
        + IMailAddress sender
        + IMessage message
    }
}

namespace API.Send #DDDDDD {
    interface IMailSender
    {
        + MailPicker mailPicker
        + void send(IMail)
    }
    class MailPicker << (S,#FF7700) Singleton >>
    {
        - List<IPostSender> sendes
        + void refreshSenders()

        + void send(IMail)
    }
    interface IPostSender
    {
        + void init()
        + void send(IMail)
    }

    IMailSender ..> API.Mail.IMail
    IMailSender "many" --o MailPicker :send
    MailPicker --o "many" IPostSender :refreshSenders
    API.Mail.IMail <-- IPostSender
}


namespace API.Receive #DDDDDD {
    interface IMailReceiver
    {
        + void receive(IMail)
    }
    class MailSorter << (S,#FF7700) Singleton >>
    {
        - List<IPostReceiver> recieves
        - List<IMailReceiver> recipients
        + void refreshReceivers()
 
        + void registerRecipient(IMailReceiver)
        + void deleteRecipient(IMailReceiver)

       + void receive(IMail)
    }
    interface IPostReceiver
    {
        + IMailReceiver MailReceiver
        + void init(MailSorter)
        + void received(IMail)
    }

    IMailReceiver ..> API.Mail.IMail
    IMailReceiver "many" o-- MailSorter : registerRecipient
    MailSorter "many" --o IPostReceiver : refreshReceivers
    API.Mail.IMail <-- IPostReceiver
}







' interface IMailHandler
' {
' }
' IMailHandler <|-- IMailReceiver
' IMailHandler <|-- IMailSender

' interface IPostHandler
' {
' }
' IPostReceiver --|> IPostHandler
' IPostSender  --|> IPostHandler

@enduml